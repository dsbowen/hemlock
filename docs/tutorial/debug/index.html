<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Debugging - Hemlock</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="../../css/extra.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Debugging";
    var mkdocs_page_input_path = "tutorial/debug.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Hemlock</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../contact/">Contact</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../checklist/">Checklist</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Tutorial</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../intro/">Introduction</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../first_project/">Your first project</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../run_local/">Running hemlock locally</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../qpolymorphs/">Question polymorphs</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../data/">Data</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../validate/">Validate</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../submit/">Submit</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../compile/">Compile</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../navigate/">Navigate</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../page_logic/">Page logic</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../comp_check/">Comprehension check</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../random_ass/">Random assignment</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../proposer_branch/">Proposer branch</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../responder_branch/">Responder branch</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Debugging</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#why-a-custom-debugging-tool">Why a custom debugging tool?</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#setup">Setup</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#basic-syntax">Basic syntax</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#default-debug-functions">Default debug functions</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#custom-debug-functions">Custom debug functions</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#debugging-our-app">Debugging our app</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#date-of-birth">Date of birth</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#comprehension-checks">Comprehension checks</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#proposals-and-responses">Proposals and responses</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#run-the-debugger">Run the debugger</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#summary">Summary</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../deploy/">Deployment</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../extra/">Bells and whistles</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Setup</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../setup/win/">Windows</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../setup/wsl/">Windows Subsystem for Linux</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../setup/mac/">Mac</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../setup/linux/">Linux</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Application</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../app/">Setting and initialization</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../debug/">Debugging</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Functions</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../compile_functions/">Compile</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../debug_functions/">Debug</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../submit_functions/">Submit</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../validate_functions/">Validate</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Models</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../bases/">Bases</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../branch/">Branch</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../choice/">Choice</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../embedded/">Embedded data and timers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../functions/">Function models</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../page/">Page</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../participant/">Participant</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../question/">Question</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../worker/">Worker</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Question polymorphs</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../check/">Check</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../dashboard/">Dashboard</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../download/">Download</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../file/">File upload</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../input/">Input</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../input_group/">Input group</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../label/">Label</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../range/">Range</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../select/">Select</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../textarea/">Textarea</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Tools</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../comprehension/">Comprehension check</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../lang/">Language</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../navbar/">Navbar</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../random/">Randomization</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../statics/">Statics</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../utils/">Utilities</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../security/">Security</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../changelog/">Changelog</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../acknowledgements/">Acknowledgements</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Hemlock</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Tutorial &raquo;</li>
        
      
    
    <li>Debugging</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/dsbowen/hemlock/edit/master/docs_md/tutorial/debug.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="debugging">Debugging</h1>
<p>In the previous part of the tutorial, you implemented the responder branch.</p>
<p>By the end of this part of the tutorial, you'll be able to use hemlock's debugging tool to make sure your app is running smoothly.</p>
<p>Click here to see what your <a href="https://github.com/dsbowen/hemlock-tutorial/blob/v0.11/blackboard.ipynb" target="_blank"><code>blackboard.ipynb</code></a> and <a href="https://github.com/dsbowen/hemlock-tutorial/blob/v0.11/survey.py" target="_blank"><code>survey.py</code></a> files should look like at the end of this part of the tutorial.</p>
<h2 id="why-a-custom-debugging-tool">Why a custom debugging tool?</h2>
<p>In the early days of hemlock, I coded a study in which I asked participants to estimate the ages of people in photographs. I used a submit function to change their data from strings to integers. Everything was running smoothly until one mischievous participant entered 'twenty-seven', breaking my survey and sending me home in a fit of rage.</p>
<p>Since then, I've rewritten my submit functions to be more fault tolerant. If you run</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">hemlock</span> <span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Submit</span> <span class="k">as</span> <span class="n">S</span>

<span class="n">Input</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;twenty-seven&#39;</span><span class="p">,</span> <span class="n">submit</span><span class="o">=</span><span class="n">S</span><span class="o">.</span><span class="n">data_type</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span><span class="o">.</span><span class="n">_submit</span><span class="p">()</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>

<p>it doesn't break; it simply converts the data to <code>None</code>.</p>
<p>But that wasn't good enough. We often underestimate just how strangely participants will respond to our studies in ways that we can't foresee.</p>
<p>To mitigate this problem, I wrote a custom debugging tool for hemlock. The tool sends an <em>AI participant</em> through your survey to check things out. 'AI participant' is a bit of a misnomer; if anything, it's an artificially stupid participant. It clicks random buttons, enters random things into inputs and text boxes, drags range sliders to random values; basically stress testing your code.</p>
<h2 id="setup">Setup</h2>
<p>To run hemlock's custom debugging tool locally, you'll need <a href="https://www.google.com/chrome/">Google Chrome</a> and <a href="https://chromedriver.chromium.org/downloads">Chromedriver</a>. Check out the setup page for your OS for specific instructions:</p>
<ul>
<li><a href="../../setup/win/#chromedriver">Windows</a></li>
<li><a href="../../setup/wsl/#chromedriver">Windows Subsystem for Linux</a></li>
<li><a href="../../setup/mac/#chromedriver">Mac</a></li>
<li><a href="../../setup/linux/#chromedriver">Linux</a></li>
</ul>
<h2 id="basic-syntax">Basic syntax</h2>
<p>Open your jupyter notebook and run the following:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">hemlock</span> <span class="kn">import</span> <span class="n">Debug</span> <span class="k">as</span> <span class="n">D</span><span class="p">,</span> <span class="n">Input</span>

<span class="n">inpt</span> <span class="o">=</span> <span class="n">Input</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="n">D</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s1">&#39;hello world&#39;</span><span class="p">))</span>
<span class="n">inpt</span><span class="o">.</span><span class="n">debug</span>
</code></pre></div>

<p>Out:</p>
<div class="highlight"><pre><span></span><code>[&lt;Debug 1&gt;]
</code></pre></div>

<p>You can add debug functions to a page or quesiton by settings its <code>debug</code> attribute or passing a <code>debug</code> argument to its constructor. Debug functions run when we run the debugger (in just a moment).</p>
<p>As its name suggests, the <code>send_keys</code> debug function tells the AI participant to send keys to the input.</p>
<p>Let's watch our debug function at work:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">hemlock</span> <span class="kn">import</span> <span class="n">Page</span>
<span class="kn">from</span> <span class="nn">hemlock.tools</span> <span class="kn">import</span> <span class="n">chromedriver</span>

<span class="n">driver</span> <span class="o">=</span> <span class="n">chromedriver</span><span class="p">()</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">Page</span><span class="p">(</span><span class="n">inpt</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">debug</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">preview</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span><span class="o">.</span><span class="n">_debug</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span>
</code></pre></div>

<p>First, we use <code>chromedriver</code> to open Chromedriver with <a href="https://selenium-python.readthedocs.io/">selenium python</a>.</p>
<p>Next, we create a page with our input question.</p>
<p>We then pop the last debug function from the page we created. Why? By default, pages have two debug functions. The first executes its questions' debug methods in random order; as if the participant were randomly jumping between questions on a page. The second debug function randomly clicks a forward or back button (if it exists), or refreshes the page. Popping the last debug function prevents the debugger from navigating, which allows us to see more clearly what the debugger is doing in preview mode.</p>
<p>Finally, we run the debug function. You'll notice it enters 'hello world' in the input.</p>
<p>After you're done, close the driver:</p>
<div class="highlight"><pre><span></span><code><span class="n">driver</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>

<p><strong>Notes.</strong></p>
<ol>
<li>You don't need to run <code>_debug</code> yourself in the survey; hemlock takes care of this automatically for you.</li>
<li><code>send_keys</code> is just one of many <a href="../../debug_functions/">prebuilt debug functions</a>.</li>
</ol>
<h2 id="default-debug-functions">Default debug functions</h2>
<p>We can attach debug functions to pages or questions. Most questions have a default debug function. For example, input questions have a default debug function which sends random ASCII characters to the input. You can see the default debug function at work by running:</p>
<div class="highlight"><pre><span></span><code><span class="n">p</span> <span class="o">=</span> <span class="n">Page</span><span class="p">(</span><span class="n">Input</span><span class="p">())</span>
<span class="n">p</span><span class="o">.</span><span class="n">debug</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">preview</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span><span class="o">.</span><span class="n">_debug</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span>
</code></pre></div>

<p>However, sometimes we need to attach additional debug functions. For example, our study begins by asking participants to enter their date of birth in <code>mm/dd/yyyy</code> format. If you wait for the default debug function to randomly enter a string which matches that pattern, you might not end up running your study before Trump releases his tax returns.</p>
<p>Instead, we'll use something like:</p>
<div class="highlight"><pre><span></span><code><span class="n">Input</span><span class="p">(</span>
    <span class="s1">&#39;&lt;p&gt;Enter your date of birth.&lt;/p&gt;&#39;</span><span class="p">,</span> 
    <span class="n">debug</span><span class="o">=</span><span class="n">D</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s1">&#39;10/26/1992&#39;</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div>

<p>Unfortunately, this will not work effectively as a debugger. Sometimes we want the debugger to enter nonsense, and sometimes we want it to enter something sensible. To specify this behavior, we can modify the above:</p>
<div class="highlight"><pre><span></span><code><span class="n">Input</span><span class="p">(</span>
    <span class="s1">&#39;&lt;p&gt;Enter your date of birth.&lt;/p&gt;&#39;</span><span class="p">,</span> 
    <span class="n">debug</span><span class="o">=</span><span class="p">[</span><span class="n">D</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(),</span> <span class="n">D</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s1">&#39;10/26/1992&#39;</span><span class="p">,</span> <span class="n">p_exec</span><span class="o">=.</span><span class="mi">8</span><span class="p">)]</span>
<span class="p">)</span>
</code></pre></div>

<p>The first debug function, <code>send_keys()</code>, sends random keys to the input. The second debug function <code>send_keys('10/26/1992')</code>, sends <code>'10/26/1992'</code> to the input. We also pass <code>p_exec=.8</code> to the second debug function, which specifies its probability of executing. In English, we're telling the debugger, <em>enter something random, then, with 80% probability, enter something sensible</em>.</p>
<h2 id="custom-debug-functions">Custom debug functions</h2>
<p>We won't need custom debug functions for our survey, but you may need them elsewhere. Creating custom debug function is similar to creating custom compile, validate, etc. functions, with one important difference: while the functions you've seen take their parent as their first argument, debug functions take a selenium webdriver as their first argument and their parent as their second argument:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@D</span><span class="o">.</span><span class="n">register</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
    <span class="c1"># debug something</span>
</code></pre></div>

<p>If you're serious about writing custom debug functions, I recommend checking out the <a href="https://github.com/dsbowen/hemlock/blob/master/hemlock/functions/debug.py">source code</a> for inspiration.</p>
<h2 id="debugging-our-app">Debugging our app</h2>
<p>First, import <code>Debug</code> at the top of <code>survey.py</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">hemlock</span> <span class="kn">import</span> <span class="n">Branch</span><span class="p">,</span> <span class="n">Check</span><span class="p">,</span> <span class="n">Compile</span> <span class="k">as</span> <span class="n">C</span><span class="p">,</span> <span class="n">Debug</span> <span class="k">as</span> <span class="n">D</span><span class="p">,</span> <span class="n">Embedded</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Label</span><span class="p">,</span> <span class="n">Navigate</span> <span class="k">as</span> <span class="n">N</span><span class="p">,</span> <span class="n">Page</span><span class="p">,</span> <span class="n">Range</span><span class="p">,</span> <span class="n">Select</span><span class="p">,</span> <span class="n">Submit</span> <span class="k">as</span> <span class="n">S</span><span class="p">,</span> <span class="n">Validate</span> <span class="k">as</span> <span class="n">V</span><span class="p">,</span> <span class="n">route</span>
<span class="o">...</span>
</code></pre></div>

<p>Our app can be debugged largely with default debug functions. The exceptions are, 1) the date of birth input, 2) the comprehension check, 3) proposals and responses.</p>
<h3 id="date-of-birth">Date of birth</h3>
<p>Modify <code>survey.py</code> as follows:</p>
<div class="highlight"><pre><span></span><code><span class="o">...</span>

<span class="nd">@route</span><span class="p">(</span><span class="s1">&#39;/survey&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">start</span><span class="p">():</span>
    <span class="n">demographics_page</span> <span class="o">=</span> <span class="n">Page</span><span class="p">(</span>
        <span class="n">Input</span><span class="p">(</span>
            <span class="s1">&#39;&lt;p&gt;Enter your date of birth.&lt;/p&gt;&#39;</span><span class="p">,</span>
            <span class="o">...</span>
            <span class="n">debug</span><span class="o">=</span><span class="p">[</span><span class="n">D</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(),</span> <span class="n">D</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s1">&#39;10/26/1992&#39;</span><span class="p">,</span> <span class="n">p_exec</span><span class="o">=.</span><span class="mi">8</span><span class="p">)]</span>
        <span class="p">),</span>
        <span class="o">...</span>
</code></pre></div>

<h3 id="comprehension-checks">Comprehension checks</h3>
<p>Because there is no attempt limit for our comprehension check, unless we tell the debugger to enter the correct answers, it's going to keep looping back to the instructions page.</p>
<div class="highlight"><pre><span></span><code><span class="o">...</span>

<span class="nd">@Compile</span><span class="o">.</span><span class="n">register</span>
<span class="k">def</span> <span class="nf">random_proposal</span><span class="p">(</span><span class="n">check_page</span><span class="p">,</span> <span class="n">accept</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="n">check_page</span><span class="o">.</span><span class="n">questions</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">D</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(),</span> <span class="n">D</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">payoff</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">p_exec</span><span class="o">=.</span><span class="mi">8</span><span class="p">)</span>
    <span class="p">]</span>
    <span class="n">check_page</span><span class="o">.</span><span class="n">questions</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">D</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(),</span> <span class="n">D</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">payoff</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">p_exec</span><span class="o">=.</span><span class="mi">8</span><span class="p">)</span>
    <span class="p">]</span>

<span class="o">...</span>
</code></pre></div>

<h3 id="proposals-and-responses">Proposals and responses</h3>
<p>It's unlikely the debugger will enter an integer between 0 and the size of the pot, so we'll give our debugger some help:</p>
<div class="highlight"><pre><span></span><code><span class="o">...</span>

<span class="k">def</span> <span class="nf">gen_proposal_input</span><span class="p">(</span><span class="n">round_</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Input</span><span class="p">(</span>
        <span class="o">...</span>
        <span class="n">debug</span><span class="o">=</span><span class="p">[</span><span class="n">D</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(),</span> <span class="n">D</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">POT</span><span class="p">)),</span> <span class="n">p_exec</span><span class="o">=.</span><span class="mi">8</span><span class="p">)]</span>
    <span class="p">)</span>

<span class="o">...</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="o">...</span>

<span class="k">def</span> <span class="nf">gen_response_input</span><span class="p">(</span><span class="n">round_</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Input</span><span class="p">(</span>
        <span class="o">...</span>
        <span class="n">debug</span><span class="o">=</span><span class="p">[</span><span class="n">D</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(),</span> <span class="n">D</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">POT</span><span class="p">)),</span> <span class="n">p_exec</span><span class="o">=.</span><span class="mi">8</span><span class="p">)]</span>
    <span class="p">)</span>

<span class="o">...</span>
</code></pre></div>

<h2 id="run-the-debugger">Run the debugger</h2>
<p>Now that our debugger won't get stuck in any infinite loops, it's time to run it.</p>
<p>Open another terminal window. As always, change to your project directory:</p>
<div class="highlight"><pre><span></span><code>$ <span class="nb">cd</span>
$ <span class="nb">cd</span> my-first-project
</code></pre></div>

<p>You should have 3 terminals open: one for jupyter, one for editing <code>survey.py</code> and running <code>hlk serve</code>, and now a third for running the debugger. In one of the terminal windows, run the hemlock app as usual (<code>hlk serve</code>). In the third terminal, run the debugger:</p>
<div class="highlight"><pre><span></span><code>$ hlk debug
</code></pre></div>

<p>To run several AI participants through the survey, e.g. 3, use:</p>
<div class="highlight"><pre><span></span><code>$ hlk debug -n <span class="m">3</span>
</code></pre></div>

<h2 id="summary">Summary</h2>
<p>In this part of the tutorial, you learned how to debug your app with hemlock's custom debugging tool.</p>
<p>In the next part of the tutorial, you'll learn how to deploy your application (i.e. put it on the web).</p>
<!-- If you don't want to use hemlock-CLI, you can run the debugger with the python interpreter:

```bash
$ python3
>>> from hemlock.debug import AIParticipant, debug
>>> debug() # or debug(3) to run 3 AI participants
``` -->
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../deploy/" class="btn btn-neutral float-right" title="Deployment">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../responder_branch/" class="btn btn-neutral" title="Responder branch"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/dsbowen/hemlock/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../responder_branch/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../deploy/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
